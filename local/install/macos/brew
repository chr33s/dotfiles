#!/usr/bin/env bash

if test ! $(which brew); then

  xcode-select --install

  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

fi

brew doctor

taps=(
  caskroom/cask
)

brew tap ${taps[@]}

packages=(
  bash-completion
  brew-cask-completion
  coreutils
  docker
  docker-machine
  dep
  elasticsearch
  git-lfs
  graphviz
  gnupg
  mailhog
  mariadb
  mas
  mercurial
  mongodb
  neovim
  nmap
  packer
  packer-completion
  plantuml
  postgres
  redis
  rsync
  sqlite
  terraform
  tree
  vagrant-completion
  watchman
  "yarn --without-node"
)

brew install "${packages[@]}"
brew prune; brew cleanup

casks=(
  android-studio
  1password
  caskroom/versions/java8
  firefox
  google-chrome
  homebrew/cask-fonts/font-fira-code
  iterm2
  sketch
  sublime-text
  superduper
  tableplus
  transmit
  tripmode
  tower
  vagrant
  virtualbox
  virtualbox-extension-pack
)

brew cask doctor
brew cask install ${casks[@]}

fonts=(
  font-fira-code
  font-lato
  font-open-sans
  font-roboto
  font-source-code-pro
  font-ubuntu
)

brew cask install "${fonts[@]}"

brew cask cleanup

${HOME}/Library/Google/GoogleSoftwareUpdate/GoogleSoftwareUpdate.bundle/Contents/Resources/ksinstall --nuke

vboxmanage setproperty machinefolder "${HOME}/VMs"
